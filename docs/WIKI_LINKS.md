# Wiki Links 機能ガイド

gWiki3では、`[PageTitle]` という記法を使用して、他のWikiページへのリンクを簡単に作成できます。

## 基本的な使い方

### ページへのリンク作成

他のページへのリンクを作成するには、ページタイトルを角括弧で囲みます:

```markdown
[Welcome to gWiki3]
[Markdown Guide]
[TestPage]
```

### リンクの表示

- **存在するページ**: 紫色のリンクとして表示され、クリックするとそのページに移動します
- **存在しないページ**: 赤色の点線下線で表示され、クリックできません

## 例

### コンテンツ内での使用

```markdown
# はじめに

このWikiの使い方については [Markdown Guide] をご覧ください。

詳細な例は [TestPage] で確認できます。

まだ作成されていないページ [FuturePage] へのリンクも作成できます。
```

### 表示結果

- `[Markdown Guide]` → 紫色のクリック可能なリンク
- `[TestPage]` → 紫色のクリック可能なリンク
- `[FuturePage]` → 赤色の点線下線（ページが存在しない）

## 技術的な詳細

### リンクの解決

Wikiリンクは以下のように処理されます:

1. ページコンテンツ内の `[PageTitle]` パターンを検出
2. 各ページタイトルについて、対応するページが存在するか確認
3. 存在する場合は、そのページIDを使用してReact Routerのリンクに変換
4. 存在しない場合は、視覚的に区別できるようスタイリング

### Markdownリンクとの違い

通常のMarkdownリンク `[text](url)` とWikiリンク `[PageTitle]` は区別されます:

```markdown
[外部サイト](https://example.com)  ← 通常のMarkdownリンク
[TestPage]                          ← Wikiリンク
```

### スタイリング

Wikiリンクには以下のCSSクラスが適用されます:

- `.wiki-link-exists`: 存在するページへのリンク
  - 紫色 (#667eea)
  - ホバー時にグラデーション効果
  
- `.wiki-link-missing`: 存在しないページへのリンク
  - 赤色 (#ef4444)
  - 点線の下線
  - カーソルが `not-allowed`

## ベストプラクティス

### 1. 正確なページタイトルを使用

Wikiリンクは大文字小文字を区別します。正確なページタイトルを使用してください:

```markdown
✅ [TestPage]
❌ [testpage]
❌ [Test Page]  (スペースの有無に注意)
```

### 2. リンク作成前にページを確認

リンクを作成する前に、対象のページが存在するか確認することをお勧めします。
存在しないページへのリンクは赤色で表示されます。

### 3. 関連ページをグループ化

関連するページへのリンクをまとめて記載すると、ナビゲーションが改善されます:

```markdown
## 関連ページ

- [Welcome to gWiki3] - メインページ
- [Markdown Guide] - Markdown記法ガイド
- [TestPage] - テストページ
```

## トラブルシューティング

### リンクが機能しない

**問題**: Wikiリンクをクリックしてもページに移動しない

**解決策**:
1. ページタイトルが正確か確認
2. ブラウザのコンソールでエラーを確認
3. ページが実際に存在するか確認（赤色で表示されている場合は存在しません）

### リンクが赤色で表示される

**問題**: 存在するはずのページへのリンクが赤色で表示される

**解決策**:
1. ページタイトルのスペルを確認
2. 大文字小文字が一致しているか確認
3. ページリストを更新（ホームページに戻る）

## 実装の詳細

### コンポーネント構成

Wikiリンク機能は以下のコンポーネントで実装されています:

- `WikiContent.tsx`: Markdownコンテンツを処理し、Wikiリンクを検出・変換
- `api.ts`: `getPageByTitle()` メソッドでページタイトルからページを検索
- `index.css`: Wikiリンクのスタイル定義

### パフォーマンス

- ページ読み込み時に一度だけWikiリンクを解決
- 同じページタイトルへの複数のリンクは一度だけチェック
- 非同期処理により、ページ表示をブロックしない

## 今後の拡張

以下の機能を将来的に追加予定:

1. **自動補完**: エディタでページタイトルの自動補完
2. **リンク切れチェック**: 存在しないページへのリンクを一覧表示
3. **バックリンク**: 現在のページにリンクしている他のページを表示
4. **ページ作成**: 赤色のリンクをクリックすると新規ページ作成画面に遷移
